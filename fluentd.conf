<source>
  @type tail
  path /var/log/auth.log
  pos_file /var/log/fluentd.pos
  tag auth.log
  <parse>
    @type none
  </parse>
</source>

<filter auth.log>
  @type record_transformer
  enable_ruby true
<record>
    orgId "84"
    tenantId "7"
    component "linux-auth"
    IP "35.238.119.241"
</record>
</filter>

<match auth.log>
  @type http
endpoint https://prod.api.authnull.com/api/v1/log/endpoint/logit
  http_method post
  serializer json
  <buffer>
    @type file
    path /var/log/fluentd/buffer
    flush_mode immediate
  </buffer>
</match>
